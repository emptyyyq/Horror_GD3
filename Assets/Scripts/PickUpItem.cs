using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class PickUpItem : MonoBehaviour
{
    public string itemName;  // Имя предмета (например, Knife, Key, Syringe)
    public Sprite itemSprite; // Спрайт предмета для отображения в инвентаре
    public Inventory inventory; // Ссылка на инвентарь для добавления предмета

    private bool isMouseOver = false; // Флаг для отслеживания наведения мыши на предмет
    private BossController boss; // Посилання на босса

    void Start()
    {
        inventory = Inventory.inventory; // Получаем ссылку на инвентарь
        boss = FindObjectOfType<BossController>(); // Знаходимо босса у сцені
    }

    void OnMouseOver()
    {
        // Когда мышь наведена на объект
        isMouseOver = true;
    }

    void OnMouseExit()
    {
        // Когда мышь покидает объект
        isMouseOver = false;
    }

    void Update()
    {
        // Проверяем, если мышь над объектом и нажата левая кнопка мыши
        if (isMouseOver && Input.GetMouseButtonDown(0)) // 0 - левая кнопка мыши
        {
            Pickup(); // Взаимодействуем с объектом
        }
    }

    void Pickup()
    {
        if (string.IsNullOrEmpty(itemName) || itemSprite == null)
        {
            Debug.LogError("Имя или спрайт предмета не заданы!");
            return;
        }

        inventory.AddItem(itemName, itemSprite); // Добавляем предмет в инвентарь


        if (itemName == "Key" && boss != null)
        {
            boss.TakeDamageFromKey(); // Викликаємо функцію у босса
        }

        Destroy(gameObject); // Видаляємо ключ після підбору
    }

}
